"use strict";async function gameStart(e){try{let t=await fetch(`dict/${e}.json`);if(!t.ok)throw`Looks like there was a problem. Status Code: ${t.status}`;let r=await t.json();gameApp(r)}catch(e){console.log(e)}}function gameApp(e){let t=document.querySelector(".game");newWord=new Word(pickWord(e)),gameWord.append(wordInput(newWord.publicWord)),t.onclick=(e=>{let t=e.target;!t.closest("span.letter")||t.closest(".checked_true")||t.closest(".checked_false")||newWord.counter<7&&!newWord.winnerChecked&&(newWord.letterChecked(t.textContent)?(newWord.updatePublicWord=t.textContent,[...gameWord.children].forEach(e=>e.remove()),gameWord.append(wordInput(newWord.publicWord)),t.classList.add("checked_true")):(t.classList.add("checked_false"),allImages[newWord.counter].classList.remove("alive"),newWord.counter=++newWord.counter),newWord.winnerChecked?message("Победа!",4):newWord.counter>=7&&message("Вы проиграли!",4)),e.stopPropagation()})}function menuClick(e){let t=document.querySelector(".header__menu"),r=document.querySelector(".burger");if(e.target.closest(".header__menu")&&e.target.id){if([...headerItem].forEach(e=>e.classList.remove("header--active")),e.target.classList.add("header--active"),[...images.children].forEach((e,t)=>{0!==t&&e.classList.add("alive")}),[...alphaBetaDom.children].forEach(e=>{e.classList.remove("checked_true"),e.classList.remove("checked_false")}),[...gameWord.children].forEach(e=>e.remove()),"random"!==e.target.id)gameStart(e.target.id);else{let e=[...headerItem].slice(1).map(e=>e.id);gameStart(pickWord(e))}r.classList.contains("active")&&t.classList.contains("active")&&r.click()}e.target.closest(".burger")&&(r.classList.toggle("active"),t.classList.toggle("active"),document.body.classList.toggle("lock")),e.stopPropagation()}function pickWord(e){return e[Math.floor(Math.random()*e.length)]}function createAlphaBeta(e){let t=[],r=new DocumentFragment;for(let e=1072;e<=1103;e++){let a=letterReturn(e);t.push(a),r.append(createSpan(a,"letter")),1077===e&&(t.push(letterReturn(1105)),r.append(createSpan(letterReturn(1105),"letter")))}e.append(r)}function letterReturn(e){return String.fromCharCode(e)}function createSpan(e,t){let r=document.createElement("span");return r.classList.add(t),r.textContent=e,r}function wordInput(e){let t=new DocumentFragment;return[...e].forEach(e=>{let r=createSpan(e,"letter_word");t.append(r)}),t}function message(e,t){let r=document.createElement("span");r.classList.add("start--message"),r.textContent=e,[...gameWord.children].forEach(e=>e.remove()),gameWord.append(r),setTimeout(blink,900,t,r)}function blink(e,t){t.classList.toggle("message--blink");let r=setTimeout(blink,900,++e,t);8===e&&clearTimeout(r)}let newWord,header=document.querySelector(".header"),headerItem=document.getElementsByClassName("header__item"),images=document.querySelector(".images"),gameWord=document.querySelector(".gameword"),alphaBetaDom=document.querySelector(".alphabeta"),allImages=document.querySelectorAll(".alive");class Word{constructor(e){this.privateWord=e,this.publicWord=Word.firstPublicWord(this.privateWord),this.counter=0}get privateWord(){return this._privateWord}set privateWord(e){this._privateWord=e}get publicWord(){return this._publicWord}set publicWord(e){this._publicWord=e}set updatePublicWord(e){let t=[...this.publicWord];[...this.privateWord].forEach((r,a)=>{r.toLowerCase()==e.toLowerCase()&&(t[a]=r)}),this.publicWord=t.join("")}get counter(){return this._counter}set counter(e){this._counter=e}get winnerChecked(){return this.publicWord.toLowerCase()===this.privateWord.toLowerCase()}static firstPublicWord(e){return Array(e.length).fill("_").join("")}letterChecked(e){return this.privateWord.toLowerCase().includes(e.toLowerCase())}}createAlphaBeta(alphaBetaDom),message("Выберите тему игры",1),header.addEventListener("click",menuClick);
